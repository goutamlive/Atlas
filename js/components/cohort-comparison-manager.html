<div class="wrapperTitle" data-bind="visible:loading">
	<i class="fa fa-refresh fa-spin"></i> Loading...
</div>

<div data-bind="if:!loading() && cohortComparison()">
	<div class="wrapperTitle">
		<i class="fa fa-balance-scale"></i> Cohort Comparison
	</div>

	<div class="asset-heading">
		<input type="text" data-bind="textInput: cohortComparison().name, css: { emptyInput: !(cohortComparison().name() && (cohortComparison().name().length > 0)) }" />
		<div class="btn-group" role="group">
			<button class="btn btn-sm btn-success" data-bind="click: save, enable:canSave">Save</button>
			<button class="btn btn-sm btn-primary" data-bind="click: close">Close</button>
		</div>
	</div>

	<ul class="nav nav-tabs">
		<li role="presentation" data-bind="css: { active: $component.tabMode() == 'overview' }, click: function() { $component.tabMode('overview') };"><a>Overview</a>
		</li>
		<li role="presentation" data-bind="css: { active: $component.tabMode() == 'advanced' }, click: function() { $component.tabMode('advanced') };"><a>Advanced</a>
		</li>
		<li role="presentation" data-bind="css: { active: $component.tabMode() == 'generate' }, click: function() { $component.tabMode('generate') };"><a>Generate</a>
		</li>
		<li role="presentation" data-bind="css: { active: $component.tabMode() == 'executions' }, click: function() { $component.tabMode('executions') };"><a>Executions</a>
		</li>
	</ul>

	<div class="tab-content">
		<div role="tabpanel" data-bind="css: { active: $component.tabMode() == 'executions' }" class="tab-pane">
			<faceted-datatable data-bind="visible:loading()==false" params="reference:executions, columns: executionColumns, options:executionOptions, rowClick:executionSelected">
			</faceted-datatable>
			
			<faceted-datatable data-bind="visible:loading()==false" params="reference:covariates, columns: covariateColumns, options:covariateOptions, rowClick:covariateSelected">
			</faceted-datatable>
			
		</div>

		<div role="tabpanel" data-bind="css: { active: $component.tabMode() == 'overview' }" class="tab-pane">
			<div class="row">
				<div class="col-md-8">
					<div>
						<label>treatment cohort</label>
						<div class="input-group">
							<input class="form-control" type="text" disabled data-bind="value: cohortComparison().treatmentCaption" />
							<span class="input-group-btn">
        				<button class="btn btn-primary" data-bind="click:chooseTreatment"><i class="fa fa-folder-open"></i></button>
							</span>
						</div>
					</div>
					<div>
						<label>comparator cohort</label>
						<div class="input-group">
							<input class="form-control" type="text" disabled data-bind="value: cohortComparison().comparatorCaption" />
							<span class="input-group-btn">
        				<button class="btn btn-primary" data-bind="click:chooseComparator"><i class="fa fa-folder-open"></i></button>
							</span>
						</div>
					</div>
					<div>
						<label>outcome cohort</label>
						<div class="input-group">
							<input class="form-control" type="text" disabled data-bind="value: cohortComparison().outcomeCaption" />
							<span class="input-group-btn">
        				<button class="btn btn-primary" data-bind="click:chooseOutcome"><i class="fa fa-folder-open"></i></button>
							</span>
						</div>
					</div>
					<div>
						<label>exclusions</label>
						<div class="input-group">
							<input class="form-control" type="text" disabled data-bind="value: cohortComparison().exclusionCaption" />
							<span class="input-group-btn">
        				<button class="btn btn-primary" data-bind="click:chooseExclusion"><i class="fa fa-folder-open"></i></button>
							</span>
						</div>
					</div>
				</div>
				<div class="col-md-4"></div>
			</div>
		</div>
		<div role="tabpanel" data-bind="css: { active: $component.tabMode() == 'generate' }" class="tab-pane">
			<div data-bind="click:executeCohortComparison" class="btn btn-success btn-sm">Generate Cohort Comparison</div>
		</div>
	</div>

	<div id="modalCohortDefinition" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title">Choose a Cohort</div>
				</div>
				<div class="modal-body">
					<cohort-definition-browser params="{model: self.model, cohortDefinitionSelected: cohortSelected}"></cohort-definition-browser>
				</div>
			</div>
		</div>
	</div>

	<div id="modalConceptSet" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title">Choose a Concept Set</div>
				</div>
				<div class="modal-body">
					<cohort-concept-set-browser params="{onActionComplete: conceptsetSelected}"></cohort-concept-set-browser>
				</div>
			</div>
		</div>
	</div>

</div>